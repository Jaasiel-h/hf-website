document.addEventListener('DOMContentLoaded',function(){const e=document.querySelectorAll('a[href^="#"]'),t=document.getElementById('contactForm'),n=document.querySelector('.header');e.forEach(e=>{e.addEventListener('click',function(e){e.preventDefault();const t=this.getAttribute('href'),o=document.querySelector(t);if(o){const e=n.offsetTop,e=o.offsetTop-n.offsetHeight;window.scrollTo({top:e,behavior:'smooth'})}})}),t&&t.addEventListener('submit',function(e){e.preventDefault();const t=new FormData(this),n=Object.fromEntries(t.entries());if(!n.name||!n.email||!n.message||!n.privacy||!n.type)return void alert('Por favor completa todos los campos requeridos.');if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email))return void alert('Por favor ingresa un email válido.');try{const e=JSON.parse(localStorage.getItem('contactSubmissions')||'[]');e.push({...n,timestamp:new Date().toISOString()}),localStorage.setItem('contactSubmissions',JSON.stringify(e))}catch(e){console.error('Error saving to localStorage:',e)}const o=`${n.type.charAt(0).toUpperCase()+n.type.slice(1)} - ${n.name} - HF Asesores`,a=`NOMBRE: ${n.name}%0D%0AEMAIL: ${n.email}%0D%0ATELÉFONO: ${n.phone||'No especificado'}%0D%0ATIPO: ${n.type}%0D%0A%0D%0AMENSAJE:%0D%0A${n.message}`;window.location.href=`mailto:contacto@hfasesores.mx?subject=${encodeURIComponent(o)}&body=${a}`,alert('Gracias por contactarnos. Un especialista se pondrá en contacto contigo pronto.'),this.reset()});let o=0;window.addEventListener('scroll',function(){const e=window.pageYOffset||document.documentElement.scrollTop;e>o&&e>100?n.style.transform='translateY(-100%)':n.style.transform='translateY(0)',o=e});const a={threshold:.1,rootMargin:'0px 0px -50px 0px'},i=new IntersectionObserver(function(e){e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity='1',e.target.style.transform='translateY(0)')})},a);document.querySelectorAll('.service__item,.solution__card,.case__card,.partner__card').forEach(e=>{e.style.opacity='0',e.style.transform='translateY(20px)',e.style.transition='opacity .6s ease, transform .6s ease',i.observe(e)});const r=()=>{const e=document.querySelector('.nav'),t=document.querySelector('.nav__menu');window.innerWidth<=768?document.querySelector('.mobile-menu-toggle')||(t=>{const n=document.createElement('button');n.className='mobile-menu-toggle',n.innerHTML='☰',n.style.cssText='display:block;background:none;border:none;font-size:1.5rem;color:#39745e;cursor:pointer',e.appendChild(n),n.addEventListener('click',()=>{t.style.display='flex'===t.style.display?'none':'flex',t.style.position='absolute',t.style.top='100%',t.style.left='0',t.style.right='0',t.style.flexDirection='column',t.style.background='#fff',t.style.boxShadow='0 2px 4px rgba(0,0,0,.1)',t.style.padding='1rem'})})(t):(document.querySelector('.mobile-menu-toggle')?.remove(),t.style.display='flex',t.style.position='static',t.style.flexDirection='row',t.style.background='none',t.style.boxShadow='none',t.style.padding='0')};r(),window.addEventListener('resize',r)});